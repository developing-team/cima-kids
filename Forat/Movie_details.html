<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A==" crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>
<body>
    
    
    <!-- محتوى الصفحة هنا -->
    <div class="navbar">
        <div class="navbar-container">
            <div class="logo-container">
                <img src="./img/logo.png" alt="Logo" width="80px" height="80px" />
            </div>
            <div class="menu-container">
                <ul class="menu-list">
                    <a href=""><li class="menu-list-item active">Home</li></a>
                    <a href=""><li class="menu-list-item">Movies</li></a>
                    <a href=""><li class="menu-list-item">Series</li></a>
                    <a href=""><li class="menu-list-item">Popular</li></a>
                    <a href=""><li class="menu-list-item">Trends</li></a>
                </ul>
            </div>
            <div class="profile-container">
                <div class="toggle">
                    <i class="fas fa-moon toggle-icon"></i>
                    <i class="fas fa-sun toggle-icon"></i>
                    <div class="toggle-ball"></div>
                </div>
            </div>
            <div class="hamburger-menu">
                <i class="fas fa-bars"></i>
            </div>
        </div>
    </div>
    <!-- محتوى الصفحة هنا -->

    <!-- preloader begin -->
    <div class="preloader">
        <div class="loader">
            <hr>
            <hr>
        </div>
    </div>
    <!-- preloader end -->


    <div class="container text-center">
        <div class="cont">
            <div class="row">
                <div class="col">
                    <img src="assets/img/image.png" alt="" class="imagee">
                </div>
                <div class="col">
                    <div class="circle-container">
                        <div class="circle"><a href="#name">Name</a></div>
                        
                        <div class="circle"><a href="#Comment">Leave a Comment</a></div>
                    </div>
                    <div class="part-text">
                        <h3>Toy Story</h3>
                        <p>The story of the legendary British outlaw portrayed with the characters as anthropomorphic animals.</p>
                        <span class="poster">8.3</span>
                        <span class="date">1999</span>
                        <div class="icon"><i class="fa-regular fa-circle-play fa-2xl" style="color: #1f3951;"></i> watch it </div>
                        <section id="Comment">
                            <div class="comment-area">
                                <h3>Comments</h3>
                                <div id="commentsList"></div>
                                <div id="readMoreComments"><a href="#" id="readMoreLink" style="color: rgb(65, 74, 238);">Read more comments</a></div>
                            </div>
                        </section>
                    </div>
                </div>
            </div>
        </div>
        <section id="LeaveComment">
            <div class="comment-box">
                <h3>Leave A Comment</h3>
                <form id="commentForm">
                    <div class="row">
                        <div class="col-xl-6 col-lg-6">
                            <input type="text" id="nameInput" placeholder="Enter Your Name">
                            <span></span>
                        </div>
                        <div class="col-xl-6 col-lg-6">
                            <input type="email" id="emailInput" placeholder="Enter Your Email">
                            <span></span>
                        </div>
                        <div class="col-xl-12 col-lg-12">
                            <textarea id="messageInput" placeholder="Write a Message"></textarea>
                            <span class="textarea"></span>
                        </div>
                        <div class="col-xl-12 col-lg-12">
                            <button type="submit" id="sendButton">Send Us Now</button>
                        </div>
                    </div>
                </form>
            </div>
        </section><br><br><br>
    </div>

    <script>
        // استمع للنقرة على الرابط
        document.getElementById('readMoreComments').addEventListener('click', function(event) {
            event.preventDefault(); // منع سلوك الرابط الافتراضي

            var hiddenSection = document.getElementById('readMoreLink');
            var style = window.getComputedStyle(hiddenSection); // جلب الوضعية الحالية للعنصر

            if (style.display === 'none') {
                hiddenSection.style.display = 'block'; // جعل القسم مرئيًا عندما يكون مخفيًا
                // يمكنك هنا إضافة المنطق الإضافي أو التعديلات اللازمة بعد عرض القسم
            } else {
                hiddenSection.style.display = 'none'; // إخفاء القسم إذا كان مرئيًا بالفعل
            }
        });
    </script>

    <!-- نموذج ترك تعليق -->
    
    <footer class="footer">
        <div class="waves">
            <div class="wave" id="wave1"></div>
            <div class="wave" id="wave2"></div>
            <div class="wave" id="wave3"></div>
            <div class="wave" id="wave4"></div>
        </div>
        <ul class="social-icon">
            <li class="social-iconitem">
                <a class="social-iconlink" href="#">
                    <ion-icon name="logo-facebook"></ion-icon>
                </a>
            </li>
            <li class="social-iconitem">
                <a class="social-iconlink" href="#">
                    <ion-icon name="logo-twitter"></ion-icon>
                </a>
            </li>
            <li class="social-iconitem">
                <a class="social-iconlink" href="#">
                    <ion-icon name="logo-linkedin"></ion-icon>
                </a>
            </li>
            <li class="social-iconitem">
                <a class="social-iconlink" href="#">
                    <ion-icon name="logo-instagram"></ion-icon>
                </a>
            </li>
        </ul>
        <ul class="menu">
            <li class="menuitem"><a class="menulink" href="#">Home</a></li>
            <li class="menuitem"><a class="menulink" href="#">About</a></li>
            <li class="menuitem"><a class="menulink" href="#">Services</a></li>
            <li class="menuitem"><a class="menulink" href="#">Team</a></li>
            <li class="menuitem"><a class="menulink" href="#">Contact</a></li>
        </ul>
        <p>&copy;2024 movies | All Rights Reserved</p>
    </footer>

    <!-- إعداد Firebase -->
    <script type="module">

        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
        import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-analytics.js";
        import { getDatabase, ref, push, onValue } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-database.js";
=======
    <section id="LeaveComment">
        <div class="comment-box">
            <h3>Leave A Comment</h3>
            <form>
                <div class="row">
                    <div class="col-xl-6 col-lg-6">
                        <input type="text" placeholder="Enter Your Name">
                        <span></span>
                    </div>
                    <div class="col-xl-6 col-lg-6">
                        <input type="email" placeholder="Enter Your Email">
                        <span></span>
                    </div>
                    <div class="col-xl-12 col-lg-12">
                        <textarea placeholder="Write a Message"></textarea>
                        <span class="textarea"></span>
                    </div>
                    <div class="col-xl-12 col-lg-12">
                        <button type="submit">Send Us Now</button>
                    </div>
                </div>
            </form>
        </div>
    </section>
    <!-- إعداد Firebase -->
    <script type="module">
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
        import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-analytics.js";
        import { getDatabase, ref, onValue } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-database.js";


        // Your web app's Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyCiL9I5hokjct0j1WiLg5ZB0erVv094aiw",
            authDomain: "cima-kids.firebaseapp.com",
            databaseURL: "https://cima-kids-default-rtdb.europe-west1.firebasedatabase.app",
            projectId: "cima-kids",
            storageBucket: "cima-kids.appspot.com",
            messagingSenderId: "324919675126",
            appId: "1:324919675126:web:af1fb7392f829b2f2104d7",
            measurementId: "G-WZHXGFQLY0"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const analytics = getAnalytics(app);
        const database = getDatabase(app);



//        // استرجاع معرف الفيلم من query parameter في عنوان URL
const urlParams = new URLSearchParams(window.location.search);
const movie_id = urlParams.get('movie_id');

// استخدام معرف الفيلم في دالة retrieveData()
function retrieveData() {
=======
        // دالة لجلب البيانات من Firebase
        function retrieveData() {
            const movie_id  = "m05";

    const movieRef = ref(database, `movies/${movie_id}`);

    onValue(movieRef, (snapshot) => {
        const data = snapshot.val();
        if (data) {
            document.querySelector('h3').innerText = data.title;
            document.querySelector('.part-text p').innerText = data.description;
            document.querySelector('.poster').innerText = data.rate;
            document.querySelector('.date').innerText = data.year;
            document.querySelector('.imagee').src = data.image_url;
        } else {
            console.error("No data found");
        }
    });
}


// استدعاء retrieveData() عند تحميل الصفحة
document.addEventListener('DOMContentLoaded', (event) => {
    retrieveData();
});



        // استدعاء الدالة لجلب البيانات عند تحميل الصفحة
        document.addEventListener('DOMContentLoaded', (event) => {
            retrieveData();
        });

        // دالة لحفظ التعليقات على Firebase
        function saveComment(comment) {
            const commentsRef = ref(database, 'comments');
            push(commentsRef, comment);
        }

        // دالة لاسترجاع التعليقات من Firebase وعرض الأول فقط
    // دالة لاسترجاع التعليقات من Firebase وعرض الأول فقط
    function retrieveComments() {
    const commentsRef = ref(database, 'comments');
    onValue(commentsRef, (snapshot) => {
        const comments = snapshot.val();
        if (comments) {
            const commentsList = document.getElementById('commentsList');
            commentsList.innerHTML = '';
            // Get the first comment
            const firstComment = Object.values(comments)[0];
            if (firstComment) {
                const commentElement = document.createElement('div');
                commentElement.classList.add('single-comment');
                commentElement.innerHTML = `
                    <div class="part-img">
                        <img src="assets/img/commentor-1.jpg" alt="">
                    </div>
                    <div class="part-text">
                        <span class="commentor-name">${firstComment.name}</span>
                        <p>${firstComment.message}</p>
                    </div>
                `;
                commentsList.appendChild(commentElement);
            }
        } else {
            console.log('No comments found');
        }
    });
}

        // استدعاء الدالة لاسترجاع التعليقات عند تحميل الصفحة
        document.addEventListener('DOMContentLoaded', (event) => {
            retrieveComments();
        });

        // مستمع حدث النقر على الرابط "Read more comments"
document.getElementById('readMoreLink').addEventListener('click', (event) => {
    event.preventDefault(); // منع سلوك الافتراضي للرابط

    // إزالة الرابط بعد النقر عليه
    document.getElementById('readMoreLink').style.display = 'none';

    // عرض جميع التعليقات المخفية
    const hiddenComments = document.querySelectorAll('.single-comment-hidden');
    hiddenComments.forEach(comment => {
        comment.classList.remove('single-comment-hidden');
    });
});

        // استدعاء الدالة لحفظ التعليقات عند النقر على زر "Send"
        document.querySelector('#commentForm').addEventListener('submit', (event) => {
            event.preventDefault();
            
            // استخراج قيم الحقول من النموذج
            const name = document.querySelector('#nameInput').value.trim();
            const email = document.querySelector('#emailInput').value.trim();
            const message = document.querySelector('#messageInput').value.trim();
            
            // التأكد من أن جميع الحقول تملأ قبل حفظ التعليق
            if (name !== '' && email !== '' && message !== '') {
                // إنشاء كائن لتخزين التعليقات
                const comment = {
                    name: name,
                    email: email,
                    message: message
                };
                
                // حفظ التعليق في Firebase
                saveComment(comment);
                
                // استرجاع التعليقات مرة أخرى لتحديث الصفحة بعد الحفظ
                retrieveComments();
                
                // مسح الحقول بعد الحفظ
                document.querySelector('#nameInput').value = '';
                document.querySelector('#emailInput').value = '';
                document.querySelector('#messageInput').value = '';
                
                // رسالة نجاح الحفظ (اختياري)
                alert('Your comment has been saved successfully!');
            } else {
                alert('Please fill in all fields before submitting.');
            }
        });
    </script>

    </script>
   <script>
    // استمع للنقرة على الرابط
    document.getElementById('commGroupedstar').addEventListener('click', function(event) {
        event.preventDefault(); // منع سلوك الرابط الافتراضي

        var hiddenSection = document.getElementById('commGrouped');
        var style = window.getComputedStyle(hiddenSection); // جلب الوضعية الحالية للعنصر

        if (style.display === 'none') {
            hiddenSection.style.display = 'block'; // جعل القسم مرئيًا عندما يكون مخفيًا
            // يمكنك هنا إضافة المنطق الإضافي أو التعديلات اللازمة بعد عرض القسم
        } else {
            hiddenSection.style.display = 'none'; // إخفاء القسم إذا كان مرئيًا بالفعل
        }
    });
</script>


    <!-- باقي الأكواد والسكربتات -->
    <script src="assets/js/jquery.js"></script>
    <script src="assets/js/bootstrap.min.js"></script>
    <script src="assets/js/owl.carousel.js"></script>
    <script src="assets/js/jquery.magnific-popup.js"></script>
    <script src="assets/js/waypoints.min.js"></script>
    <script src="assets/js/wow.min.js"></script>

   
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjv
=======
    <script src="assets/js/main.js"></script>
</body>
</html>

